<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title data-i18n="title">Maze Runner - Escape the Maze | DopaBrain</title>

    <!-- SEO Meta -->
    <meta name="description" content="Navigate procedurally generated mazes, collect keys and bonuses, and conquer increasingly challenging stages. Play Maze Runner free online with 3 game modes!">
    <meta name="theme-color" content="#0a0a1a">

    <!-- Canonical & Hreflang -->
    <link rel="canonical" href="https://dopabrain.com/maze-runner/">
    <link rel="alternate" hreflang="x-default" href="https://dopabrain.com/maze-runner/">
    <link rel="alternate" hreflang="ko" href="https://dopabrain.com/maze-runner/?lang=ko">
    <link rel="alternate" hreflang="en" href="https://dopabrain.com/maze-runner/?lang=en">
    <link rel="alternate" hreflang="zh" href="https://dopabrain.com/maze-runner/?lang=zh">
    <link rel="alternate" hreflang="hi" href="https://dopabrain.com/maze-runner/?lang=hi">
    <link rel="alternate" hreflang="ru" href="https://dopabrain.com/maze-runner/?lang=ru">
    <link rel="alternate" hreflang="ja" href="https://dopabrain.com/maze-runner/?lang=ja">
    <link rel="alternate" hreflang="es" href="https://dopabrain.com/maze-runner/?lang=es">
    <link rel="alternate" hreflang="pt" href="https://dopabrain.com/maze-runner/?lang=pt">
    <link rel="alternate" hreflang="id" href="https://dopabrain.com/maze-runner/?lang=id">
    <link rel="alternate" hreflang="tr" href="https://dopabrain.com/maze-runner/?lang=tr">
    <link rel="alternate" hreflang="de" href="https://dopabrain.com/maze-runner/?lang=de">
    <link rel="alternate" hreflang="fr" href="https://dopabrain.com/maze-runner/?lang=fr">

    <!-- Open Graph -->
    <meta property="og:title" content="Maze Runner - Escape the Maze | DopaBrain">
    <meta property="og:description" content="Navigate procedurally generated mazes, collect keys and bonuses, and conquer increasingly challenging stages. 3 game modes available!">
    <meta property="og:image" content="https://dopabrain.com/maze-runner/icon-512.svg">
    <meta property="og:url" content="https://dopabrain.com/maze-runner/">
    <meta property="og:type" content="website">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Maze Runner - Escape the Maze | DopaBrain">
    <meta name="twitter:description" content="Navigate procedurally generated mazes, collect keys and bonuses, and conquer increasingly challenging stages.">
    <meta name="twitter:image" content="https://dopabrain.com/maze-runner/icon-512.svg">

    <!-- Schema.org VideoGame -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "VideoGame",
        "name": "Maze Runner",
        "description": "Navigate procedurally generated mazes, collect keys and bonuses, and conquer increasingly challenging stages with 3 unique game modes.",
        "url": "https://dopabrain.com/maze-runner/",
        "image": "https://dopabrain.com/maze-runner/icon-512.svg",
        "author": {
            "@type": "Organization",
            "name": "DopaBrain",
            "url": "https://dopabrain.com"
        },
        "genre": ["Puzzle", "Maze"],
        "gamePlatform": "Web Browser",
        "applicationCategory": "Game",
        "operatingSystem": "Any",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "USD"
        },
        "inLanguage": ["en", "ko", "ja", "zh", "es", "pt", "id", "tr", "de", "fr", "hi", "ru"]
    }
    </script>

    <!-- PWA -->
    <link rel="manifest" href="./manifest.json">
    <link rel="icon" type="image/svg+xml" href="./icon-192.svg">
    <link rel="apple-touch-icon" href="./icon-192.svg">

    <!-- Styles -->
    <link rel="stylesheet" href="./css/style.css">
</head>
<body>
    <!-- App Loader -->
    <div class="app-loader" id="app-loader">
        <div class="loader-spinner"></div>
        <p data-i18n="app.loading">Loading...</p>
    </div>

    <!-- Sound Toggle -->
    <button class="sound-toggle" id="sound-toggle" data-i18n-title="control.sound" title="Sound">ğŸ”Š</button>

    <!-- Language Selector -->
    <div class="language-selector">
        <button class="lang-toggle" id="lang-toggle" title="Language">ğŸŒ</button>
        <div class="lang-menu hidden" id="lang-menu">
            <button class="lang-option" data-lang="ko">ğŸ‡°ğŸ‡· í•œêµ­ì–´</button>
            <button class="lang-option" data-lang="en">ğŸ‡ºğŸ‡¸ English</button>
            <button class="lang-option" data-lang="ja">ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª</button>
            <button class="lang-option" data-lang="zh">ğŸ‡¨ğŸ‡³ ä¸­æ–‡</button>
            <button class="lang-option" data-lang="es">ğŸ‡ªğŸ‡¸ EspaÃ±ol</button>
            <button class="lang-option" data-lang="pt">ğŸ‡§ğŸ‡· PortuguÃªs</button>
            <button class="lang-option" data-lang="id">ğŸ‡®ğŸ‡© Indonesia</button>
            <button class="lang-option" data-lang="tr">ğŸ‡¹ğŸ‡· TÃ¼rkÃ§e</button>
            <button class="lang-option" data-lang="de">ğŸ‡©ğŸ‡ª Deutsch</button>
            <button class="lang-option" data-lang="fr">ğŸ‡«ğŸ‡· FranÃ§ais</button>
            <button class="lang-option" data-lang="hi">ğŸ‡®ğŸ‡³ à¤¹à¤¿à¤¨à¥à¤¦à¥€</button>
            <button class="lang-option" data-lang="ru">ğŸ‡·ğŸ‡º Ğ ÑƒÑÑĞºĞ¸Ğ¹</button>
        </div>
    </div>

    <!-- App Screens -->
    <div id="app">
        <!-- Start Screen -->
        <div id="startScreen" class="screen active">
            <h1 class="title" data-i18n="menu.title">Maze Runner</h1>
            <p class="subtitle" data-i18n="menu.subtitle">Navigate the maze. Collect the keys. Escape!</p>

            <div class="stats-card">
                <div class="stat-item">
                    <span data-i18n="menu.bestStage">Best Stage</span>
                    <span id="best-stage">0</span>
                </div>
                <div class="stat-item">
                    <span data-i18n="menu.bestScore">Best Score</span>
                    <span id="best-score">0</span>
                </div>
            </div>

            <div class="mode-cards">
                <div class="mode-card active" data-mode="normal">
                    <div class="mode-icon">ğŸƒ</div>
                    <div class="mode-name" data-i18n="modes.normal">Normal</div>
                    <div class="mode-desc" data-i18n="modes.normalDesc">Classic maze solving at your own pace</div>
                </div>
                <div class="mode-card" data-mode="fog">
                    <div class="mode-icon">ğŸŒ«ï¸</div>
                    <div class="mode-name" data-i18n="modes.fog">Fog of War</div>
                    <div class="mode-desc" data-i18n="modes.fogDesc">Limited visibility around your position</div>
                </div>
                <div class="mode-card" data-mode="timer">
                    <div class="mode-icon">â±ï¸</div>
                    <div class="mode-name" data-i18n="modes.timer">Time Attack</div>
                    <div class="mode-desc" data-i18n="modes.timerDesc">Beat the clock before time runs out</div>
                </div>
            </div>

            <button class="btn btn-primary" id="startBtn" data-i18n="menu.start">Start Game</button>
            <a class="home-link" href="/portal/" data-i18n="menu.homeLink">More Games</a>
        </div>

        <!-- Game Screen -->
        <div id="gameScreen" class="screen">
            <div class="game-hud">
                <div class="hud-item">
                    <span class="hud-label" data-i18n="game.stage">Stage</span>
                    <span class="hud-value" id="stage-display">1</span>
                </div>
                <div class="hud-item">
                    <span class="hud-label" data-i18n="game.time">Time</span>
                    <span class="hud-value" id="time-display">0</span>
                </div>
                <div class="hud-item">
                    <span class="hud-label" data-i18n="game.score">Score</span>
                    <span class="hud-value" id="score-display">0</span>
                </div>
            </div>

            <div class="items-hud">
                <span class="item-badge">ğŸ”‘ <span id="key-count">0</span></span>
                <span class="item-badge">â­ <span id="bonus-count">0</span></span>
                <span class="combo-badge hidden" id="combo-display">x1</span>
            </div>

            <canvas id="gameCanvas"></canvas>

            <div class="minimap-container">
                <canvas id="minimapCanvas"></canvas>
            </div>

            <div class="powerup-container">
                <button class="powerup-btn" id="hint-btn" data-i18n-title="game.hint" title="Hint">ğŸ’¡</button>
                <button class="powerup-btn" id="minimap-btn" data-i18n-title="game.minimap" title="Minimap">ğŸ—ºï¸</button>
            </div>

            <div class="dpad-container">
                <div class="dpad-row">
                    <span></span>
                    <button class="dpad-btn" data-dir="up">â–²</button>
                    <span></span>
                </div>
                <div class="dpad-row">
                    <button class="dpad-btn" data-dir="left">â—€</button>
                    <span></span>
                    <button class="dpad-btn" data-dir="right">â–¶</button>
                </div>
                <div class="dpad-row">
                    <span></span>
                    <button class="dpad-btn" data-dir="down">â–¼</button>
                    <span></span>
                </div>
            </div>
        </div>

        <!-- Level Complete Screen -->
        <div id="levelCompleteScreen" class="screen">
            <h2 class="result-title" data-i18n="result.title">Level Complete!</h2>

            <div class="star-rating">
                <span class="star">â˜…</span>
                <span class="star">â˜…</span>
                <span class="star">â˜…</span>
            </div>

            <div class="score-breakdown">
                <div class="score-row">
                    <span data-i18n="result.timeBonus">Time Bonus</span>
                    <span id="result-time-bonus">0</span>
                </div>
                <div class="score-row">
                    <span data-i18n="result.keysCollected">Keys Collected</span>
                    <span id="result-keys">0</span>
                </div>
                <div class="score-row">
                    <span data-i18n="result.bonusCollected">Bonus Collected</span>
                    <span id="result-bonus">0</span>
                </div>
                <div class="score-row">
                    <span data-i18n="result.comboBonus">Combo Bonus</span>
                    <span id="result-combo">0</span>
                </div>
                <div class="score-row total-row">
                    <span data-i18n="result.total">Total</span>
                    <span id="result-total">0</span>
                </div>
            </div>

            <div class="new-best-badge hidden" id="new-best-badge" data-i18n="result.newBest">New Best!</div>

            <div class="result-buttons">
                <button class="btn btn-primary" id="nextLevelBtn" data-i18n="result.nextLevel">Next Level</button>
                <button class="btn btn-secondary" id="menuBtnComplete" data-i18n="result.menu">Menu</button>
            </div>
        </div>

        <!-- Game Over Screen -->
        <div id="gameOverScreen" class="screen">
            <h2 class="gameover-title" data-i18n="gameover.title">Game Over</h2>

            <div class="gameover-stats">
                <div class="gameover-stat">
                    <span data-i18n="gameover.finalStage">Final Stage</span>
                    <span id="final-stage">0</span>
                </div>
                <div class="gameover-stat">
                    <span data-i18n="gameover.finalScore">Final Score</span>
                    <span id="final-score">0</span>
                </div>
            </div>

            <div class="gameover-buttons">
                <button class="btn btn-primary" id="retryBtn" data-i18n="gameover.retry">Try Again</button>
                <button class="btn btn-secondary" id="menuBtnOver" data-i18n="gameover.menu">Menu</button>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container" id="toast-container"></div>

    <!-- GA4 -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-J8GSWM40TV"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-J8GSWM40TV');
    </script>

    <!-- AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3600813755953882" crossorigin="anonymous"></script>

    <!-- Service Worker -->
    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('./sw.js').catch(function() {});
        }
    </script>

    <!-- App Scripts -->
    <script src="./js/error-handler.js"></script>
    <script src="./js/i18n.js"></script>
    <script src="./js/sound-engine.js"></script>
    <script src="./js/app.js"></script>
    <script src="/portal/js/cross-promo.js" defer></script>
</body>
</html>
